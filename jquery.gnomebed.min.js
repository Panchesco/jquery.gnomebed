!function(t){$.fn.gnomebed=function(t){function e(t,e){switch(a.mode){case"append":$(e).append(t);break;case"prepend":$(e).prepend(t);break;default:$(e).html(t)}}function o(t){switch(a.attr){case"text":return $(t).text().trim();default:return $(t).attr(a.attr)}}function r(t){var e=t.match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&]+)/);return null!=e?e[1]:null}function n(t){return html="",u(),endpoint="https://www.youtube.com/embed/",id=r(t),id&&(html+='<iframe width="'+a.maxwidth+'" height="'+a.maxheight+'" src="'+endpoint+id+u()+'" frameborder="0" allowfullscreen></iframe>'),html}function u(){for(str="?",i=0;i<a.youtubeOpts.length;i++)opt=a.youtubeOpts[i],str+=h[i]+"="+a.youtube[opt],i!=h.length-1&&(str+="&amp;");return str}var a=$.extend({mode:"replace",attr:"text",nowrap:"on",maxwidth:800,maxheight:450,youtube:{showinfo:1,controls:1,rel:1,autoplay:0},youtubeOpts:["showinfo","controls","rel","autoplay","vq"]},t),h=["showinfo","controls","rel","autoplay","vq"];provider=function(t){return-1!=t.search(/soundcl/i)?"soundcloud":-1!=t.search(/vimeo/i)?"vimeo":-1!=t.search(/YouTu/i)?"youtube":"unknown"},$(this).each(function(){url=o(this),p=provider(url),"on"==a.nowrap&&(url=url+"&nowrap="+a.nowrap),void 0!=a.maxwidth&&(url=url+"&maxwidth="+a.maxwidth),void 0!=a.maxheight&&(url=url+"&maxheight="+a.maxheight),endpoint="http://noembed.com/embed?url="+url;var t=$(this);switch(p){case"youtube":e(n(url),t);break;default:$.ajax({method:"GET",url:endpoint,dataType:"json"}).done(function(o){e(o.html,t)})}})}}(jQuery);